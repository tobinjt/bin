#!/bin/bash

set -e -f -u -o pipefail

cd "${HOME}/Downloads/warhammer/"
printf "Updating homebrew to check for new version of youtube-dl\\n"
brew update
if brew outdated | grep youtube-dl; then
  printf "Updating youtube-dl\\n"
  brew upgrade youtube-dl
fi
count=1
for url in "$@"; do
  printf "%d/%d %s\\n" "${count}" "$#" "${url}"
  until /usr/local/bin/youtube-dl "${url}"; do
    sleep 10
  done
  count=$((count + 1))
  printf "\\n\\n"
done

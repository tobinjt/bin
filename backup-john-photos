#!/bin/bash

set -e -f -u -o pipefail

readonly destdir="mini:/Volumes/Data/backups/JohnStuff/"
readonly srcdir="/Volumes/Johns Stuff/"

if [[ ! -d "${srcdir}" ]]; then
  echo "Missing source: ${srcdir}" >&2
  exit 1
fi

rsync --archive --info=progress2,stats --human-readable \
  --exclude='.*' --one-file-system \
  --delete --rsync-path=/usr/local/bin/rsync \
  "${srcdir}" "${destdir}"
